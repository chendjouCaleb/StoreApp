<app-layout [title]="'Articles'">
  <div class="col-12 row py-3 border-bottom mx-0 px-0">
    <h2 class="col-4">Articles {{articles?.size}}</h2>
    <div class="col-8 text-right ">
      <button class="btn btn-info" (click)="openAddArticleModal()">
        <i class="mdi mdi-plus"></i> Ajouter un article
      </button>

      <button class="btn btn-outline-info ml-3" (click)="openReceptionModal()">
        <i class="mdi mdi-plus"></i> Recevoir des marchandises
      </button>
    </div>
  </div>


  <div class="col-12 row my-5">
    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <h5>Quantité total</h5>
      <h3 class="text-info">{{summary.quantity}}</h3>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <h5>Prix d'achat total</h5>
      <h3 class="text-info">{{summary.buyingPrice | price}}</h3>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <h5>Prix de vente total</h5>
      <h3 class="text-info">{{summary.sellingPrice | price}}</h3>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <h5>Marge bénéficiaire</h5>
      <h3 class="text-info" style="font-weight: 100">{{summary.margin | price}}</h3>
    </div>

  </div>
  <table class="table table-striped text-right">
    <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Nom</th>
      <th scope="col">Reférence</th>
      <th scope="col">Quantité</th>
      <th scope="col">Prix d'achat</th>
      <th scope="col">Prix d'achat total</th>
      <th scope="col">Prix de vente</th>
      <th scope="col">Prix de vente total</th>
      <th scope="col"></th>
    </tr>
    </thead>
    <tbody>

    <tr *ngFor="let article of articles">
     <td>{{article.id}}</td>
      <td>{{article.name}}</td>
      <td>{{article.reference}}</td>
      <td>{{article.quantity}}</td>
      <td>{{article.buyingPrice | price}} </td>
      <td>{{article.buyingPrice * article.quantity| price}} </td>
      <td>{{article.sellingPrice | price}} </td>
      <td class="text-right">{{article.sellingPrice  * article.quantity | price}} </td>
      <td>
        <button class="btn btn-info btn-sm mr-2 btn-sm" (click)="addToCart(article)">
          <i class="mdi mdi-cart-plus mdi-18px"></i>
          <span class="ml-1" *ngIf="article.countInCart">{{article.countInCart}}</span>
        </button>
        <button class="btn btn-outline-info btn-sm" [routerLink]="['/articles', article.id, 'home']">Voir</button>
      </td>
    </tr>
    </tbody>
  </table>


</app-layout>
